#!/usr/bin/env node
var _ = require('lodash');
var markdownDiagram = require('../src/main');

var fs = require('fs');

var content;

var file = process.argv[2];
if (file){
  content = fs.readFileSync(file).toString();
} else {
  content = fs.readFileSync('/dev/stdin').toString();
}

var output = markdownDiagram.generate(content);

var template = _.template(fs.readFileSync(__dirname + '/template.html'));
var html = template(output);
console.log(html);
